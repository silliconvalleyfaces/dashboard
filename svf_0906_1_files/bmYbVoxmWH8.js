if (self.CavalryLogger) { CavalryLogger.start_js(["0Bxfz"]); }

__d('PagesMessengerThreadDialogLink.react',['AsyncDialog','AsyncRequest','Link.react','MessageThreadViewSource','PagesMessagingConst','ReactComponentWithPureRenderMixin','React','URI'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'PagesMessengerThreadDialogLink',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{threadID:h.string.isRequired,viewer:h.string.isRequired,folder:h.string},getInitialState:function j(){return {permalinkURI:'#'};},componentDidMount:function j(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function j(k){if(k.threadID!==this.props.threadID||k.folder!==this.props.folder)this._getPermalinkURI(k);},render:function j(){return (c('React').createElement(c('Link.react'),{className:this.props.className,href:'#',onClick:this._handleClick,role:'button'},this.props.children));},_handleClick:function j(k){k.preventDefault();c('AsyncDialog').send(new (c('AsyncRequest'))(this.state.permalinkURI).setRelativeTo(k.target));},_getPermalinkURI:function j(k){this.setState(this.getInitialState());var l=k.threadID,m=k.viewer,n=k.folder;e(['MercuryThreadIDMap'],function(o){var p=o.getForFBID(m);p.getServerIDFromClientID(l,function(q){this.isMounted()&&this.setState({permalinkURI:new (c('URI'))(c('PagesMessagingConst').LOAD_MESSAGE_THREAD_URI).setQueryData({pageid:m,threadid:l,threadElementID:q,folder:n,source:c('MessageThreadViewSource').REFRESH_HIGHLANDER_JEWEL}).toString()});}.bind(this));}.bind(this));}});f.exports=i;}),null);
__d('MercuryJewelCountControl',['Arbiter','MercuryDispatcher','MercuryThreadInformer','MercuryUnseenState','UserActivity','isInFocusMode'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';var j=c('MercuryDispatcher').get(),k=c('MercuryThreadInformer').get();this.$MercuryJewelCountControl2=c('MercuryUnseenState').get();this.render();j.subscribe('model-update-completed',function(l,m){this.$MercuryJewelCountControl3(false);}.bind(this));k.subscribe('unseen-updated',function(){return this.render();}.bind(this));this.$MercuryJewelCountControl1=i;this.$MercuryJewelCountControl1.subscribe('marked-seen',function(){this.$MercuryJewelCountControl3(true);}.bind(this));}h.prototype.render=function(){'use strict';var i=c('isInFocusMode')()?0:this.$MercuryJewelCountControl2.getUnseenCount();c('Arbiter').inform('jewel/count-updated',{jewel:'mercurymessages',count:i},c('Arbiter').BEHAVIOR_STATE);};h.prototype.$MercuryJewelCountControl3=function(i){'use strict';if(i||this.$MercuryJewelCountControl1.isOpen()&&c('UserActivity').isActive())this.$MercuryJewelCountControl2.markAsSeen();};h.constructStores=function(){'use strict';c('MercuryUnseenState').get();};f.exports=h;}),null);
__d('P2PBannerStore',['invariant','EventEmitter','P2PActionConstants','P2PAPI','P2PDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=void 0,l={},m=false,n=false;i=babelHelpers.inherits(o,c('EventEmitter'));j=i&&i.prototype;function o(){j.constructor.call(this);k=c('P2PDispatcher').register(this.onEventDispatched.bind(this));}o.prototype.onEventDispatched=function(p){var q=p.type,r=p.data;switch(q){case c('P2PActionConstants').BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(r);this.emit('change');break;case c('P2PActionConstants').BANNER_DISMISSED:this.handleBannerDismissed(r);this.emit('change');break;case c('P2PActionConstants').BANNER_COMPLETED:this.handleBannerCompleted(r);this.emit('change');break;}};o.prototype.handleBannerStatesUpdated=function(p){m=true;l=p;};o.prototype.handleBannerDismissed=function(p){var q=this.getBannerState(p);q.hasBeenDismissed=true;};o.prototype.shouldShowBanner=function(p){var q=void 0;if(!n){c('P2PAPI').getBannerStates();n=true;return false;}if(!m)return false;q=this.getBannerState(p);return (q.eligible&&!q.hasBeenDismissed);};o.prototype.handleBannerCompleted=function(p){var q=this.getBannerState(p);q.eligible=false;};o.prototype.getBannerState=function(p){var q=l[p];!q?h(0):void 0;return q;};f.exports=new o();}),null);
__d('P2PJewelBanner.react',['cx','fbt','ix','Image.react','Layout.react','P2PButton.react','React','TooltipLink.react','URI','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('Layout.react').FillColumn,n=c('Layout.react').Column,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return q=(r=l.constructor).call.apply(r,[this].concat(t)),this.handleCloseClick=function(v){v.stopPropagation();if(this.props.onClose)this.props.onClose();}.bind(this),this.handleClick=function(){this.execPrimaryClick();}.bind(this),this.handlePrimaryClick=function(v){v.stopPropagation();this.execPrimaryClick();}.bind(this),this.execPrimaryClick=function(){if(this.props.primaryActionConfig.uri)new (c('URI'))(this.props.primaryActionConfig.uri).go();this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick();}.bind(this),this.handleSecondaryActionClick=function(v){v.stopPropagation();this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick();}.bind(this),this.renderCloseButton=function(){return (c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:"_47d8",href:'#',onClick:this.handleCloseClick,position:'above',tooltip:i._("\u89e3\u9664")},c('React').createElement(c('Image.react'),{className:"_47dg",height:7,src:j('/images/p2p/jewel-banner-close.png'),width:7})));}.bind(this),this.renderActions=function(){var v=this.props.primaryActionConfig,w=void 0,x=this.props.secondaryActionConfig;if(x)w=c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:'#',label:x.text,onClick:this.handleSecondaryActionClick,size:'large',target:'_blank',type:'primary'});return (c('React').createElement('div',null,w,c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:v.uri||'#',label:v.text,onClick:this.handlePrimaryClick,size:'large',target:'_blank',type:'primary',use:'confirm'})));}.bind(this),q;}p.prototype.render=function(){var q=void 0;if(this.props.isDismissable)q=this.renderCloseButton();return (c('React').createElement('div',{className:"_5d0n",onClick:this.handleClick},q,c('React').createElement(c('Layout.react'),null,c('React').createElement(n,{className:"_400i"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('Image.react'),{className:"_5d0q",height:50,src:j('/images/p2p/jewel-banner-coin.png'),width:50}))),c('React').createElement(m,{className:"_47di"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',weight:'bold'},this.props.titleText),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light'},this.props.bodyText))),c('React').createElement(n,{className:"_400k"},c('React').createElement('div',{className:"_400j"},this.renderActions())))));};p.propTypes={bodyText:o.oneOfType([o.string,o.object]),isDismissable:o.bool,onClose:o.func,primaryActionConfig:o.shape({onClick:o.func,text:o.string.isRequired,uri:o.oneOfType([o.string,o.object])}).isRequired,secondaryActionConfig:o.shape({onClick:o.func.isRequired,text:o.string.isRequired}),titleText:o.string.isRequired};p.defaultProps={isDismissable:false};f.exports=p;}),null);
__d('P2PPendingPaymentRequestJewelBanner.react',['fbt','P2PJewelBanner.react','P2PPaymentRequest','P2PPaymentRequestActionHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.handleDeclineClick=function(){c('P2PPaymentRequestActionHelper').initDeclinePaymentRequestFlow(this.props.paymentRequest);}.bind(this),this.handlePayClick=function(){c('P2PPaymentRequestActionHelper').initPayForPaymentRequestFlow(this.props.paymentRequest,'banner');}.bind(this),this.renderBodyText=function(){var r=this.props.paymentRequest,s=r.memoText;if(!s)return null;return h._("\u539f\u56e0\uff1a{What the user paid for}",[h.param('What the user paid for',s)]);}.bind(this),m;}l.prototype.render=function(){var m=this.props.paymentRequest;return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:h._("\u4ed8\u6b3e")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:h._("\u62d2\u7d55")},titleText:h._("{requester_name}\u8981\u6c42\u4f60\u4ed8\u6b3e{amount}",[h.param('requester_name',m.requester.name),h.param('amount',m.amountWithSymbol)])}));};l.propTypes={paymentRequest:k.instanceOf(c('P2PPaymentRequest')).isRequired};f.exports=l;}),null);
__d('P2PPendingPushFailJewelBanner.react',['fbt','P2PJewelBanner.react','P2PLinkConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.getActionText=function(){return h._("\u77ad\u89e3\u8a73\u60c5");},this.getBodyText=function(){var r=this.props.transfer;return h._("\u7121\u6cd5\u4f7f\u7528\u4f60\u7684\u7c3d\u5e33\u91d1\u878d\u5361\u5c07{sender_name}\u7684{amount}{currency}\u5b58\u5165\u3002",[h.param('currency',r.currency),h.param('amount',r.amount),h.param('sender_name',r.sender.name)]);}.bind(this),m;}l.prototype.render=function(){return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:c('P2PLinkConstants').helpTransferPushFailURI},titleText:h._("\u66f4\u65b0\u5361\u7247")}));};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PTimeBasedAcceptMessage.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.transfer,n=m.creationTime*1000,o=1000*60*60*24,p=Date.now(),q=(p-n)/o,r=m.expirationTimestamp*1000-p,s=Math.round(Math.max(r/o,1)),t=void 0;if(q<=2){t=h._("\u65b0\u589e\u7c3d\u5e33\u91d1\u878d\u5361\uff0c\u8a72\u6b3e\u9805\u5c31\u6703\u76f4\u63a5\u532f\u5165\u4f60\u7684\u9280\u884c\u3002");}else if(q<=4){t=h._("\u9019\u7b46\u6b3e\u9805\u5c07\u65bc{days left}\u5929\u5f8c\u9000\u56de\u3002\u8acb\u65b0\u589e\u7c3d\u5e33\u91d1\u878d\u5361\u4ee5\u63a5\u6536\u4ed8\u6b3e\u3002",[h.param('days left',s)]);}else if(q<=5){t=h._({"day":"\u5728\u6b3e\u9805\u9000\u56de\u7d66{sender_name}\u524d\uff0c\u4f60\u9084\u6709{days left}\u5929\u7684\u6642\u9593\u53ef\u65b0\u589e\u7c3d\u5e33\u91d1\u878d\u5361\u3002","days":"\u5728\u6b3e\u9805\u9000\u56de{sender_name}\u4e4b\u524d\uff0c\u4f60\u9084\u6709{days left}\u5929\u53ef\u4ee5\u65b0\u589e\u7c3d\u5e33\u91d1\u878d\u5361\u3002"},[h.param('days left',s),h['enum'](s===1?'day':'days',{day:'day',days:'days'}),h.param('sender_name',m.sender.name)]);}else t=h._("\u5728\u4ed8\u6b3e\u9000\u56de\u7d66{sender_name}\u4e4b\u524d\uff0c\u4f60\u6709 24 \u5c0f\u6642\u53ef\u65b0\u589e\u7c3d\u5e33\u91d1\u878d\u5361\u3002",[h.param('sender_name',m.sender.name)]);return c('React').createElement('div',null,t);};function l(){i.apply(this,arguments);}l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PPendingRecipientNUXJewelBanner.react',['fbt','P2PAcceptMoneyDialog.react','P2PActions','P2PCreditCardStore','P2PJewelBanner.react','P2PTimeBasedAcceptMessage.react','React'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPendingRecipientNUXJewelBanner',propTypes:{transfer:i.object.isRequired},getInitialState:function k(){return {creditCards:c('P2PCreditCardStore').getAll()};},creditCardStoreSub:null,componentDidMount:function k(){this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange);},componentWillUnmount:function k(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},onCreditCardStoreChange:function k(){var l={creditCards:c('P2PCreditCardStore').getAll()};if(this.isMounted())this.setState(l);},handleClick:function k(){this.showAcceptMoneyDialog();},showAcceptMoneyDialog:function k(){c('P2PActions').showDialog(c('P2PAcceptMoneyDialog.react'),{creditCards:this.state.creditCards,onClose:c('P2PActions').hideDialog,transfer:this.props.transfer});},renderTimeBasedMessage:function k(){return (c('React').createElement(c('P2PTimeBasedAcceptMessage.react'),{transfer:this.props.transfer}));},render:function k(){var l=this.props.transfer;if(!c('P2PCreditCardStore').isCreditCardsFetchComplete())return null;return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:h._("\u65b0\u589e\u5361\u7247")},titleText:h._("\u63a5\u53d7{sender_name}\u7684{currency}{amount}\u3002",[h.param('currency',l.currency),h.param('amount',l.amount),h.param('sender_name',l.sender.name)])}));}});f.exports=j;}),null);
__d('P2PPendingRecipientVerificationJewelBanner.react',['fbt','P2PJewelBanner.react','P2PTransferParam','P2PVerificationFlowHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.handleClick=function(){c('P2PVerificationFlowHelper').startVerificationFlow(this.props.transfer[c('P2PTransferParam').TRANSFER_ID],false);}.bind(this),m;}l.prototype.render=function(){return (c('React').createElement(c('P2PJewelBanner.react'),{bodyText:h._("\u82e5\u8981\u63a5\u53d7{sender_name}\u7684\u4ed8\u6b3e\uff0c\u8acb\u6838\u5be6\u4f60\u7684\u8cc7\u8a0a\u3002",[h.param('sender_name',this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:h._("\u78ba\u8a8d\u8cc7\u6599")},titleText:h._("\u8acb\u78ba\u8a8d\u8cc7\u6599")}));};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PJewelBannerContainer.react',['cx','CurrentUser','P2PBannerStore','P2PPaymentRequestsStore','P2PPendingPaymentRequestJewelBanner.react','P2PPendingPushFailJewelBanner.react','P2PPendingRecipientNUXJewelBanner.react','P2PPendingRecipientVerificationJewelBanner.react','P2PTransferParam','P2PTransferStatus','P2PTransferStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'P2PJewelBannerContainer',mixins:[c('PureStoreBasedStateMixin')(c('P2PBannerStore'),c('P2PPaymentRequestsStore'),c('P2PTransferStore'))],statics:{calculateState:function j(){var k=c('P2PTransferStore').getNUXTransfer(),l=c('P2PPaymentRequestsStore').getPendingPaymentRequest();return {paymentRequest:l,paymentRequestBannerShown:!!l,transfer:k,transferBannerShown:k&&k.receiver.id==c('CurrentUser').getID()};}},renderTransferBanner:function j(){var k=this.state.transfer,l=k[c('P2PTransferParam').STATUS];switch(l){case c('P2PTransferStatus').PENDING_RECIPIENT_NUX:return (c('React').createElement(c('P2PPendingRecipientNUXJewelBanner.react'),{transfer:k}));case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION:return (c('React').createElement(c('P2PPendingRecipientVerificationJewelBanner.react'),{transfer:k}));case c('P2PTransferStatus').PENDING_PUSH_FAIL:return (c('React').createElement(c('P2PPendingPushFailJewelBanner.react'),{transfer:k}));}},renderPaymentRequestBanner:function j(){return (c('React').createElement(c('P2PPendingPaymentRequestJewelBanner.react'),{paymentRequest:this.state.paymentRequest}));},render:function j(){var k=void 0;if(this.state.transferBannerShown){k=this.renderTransferBanner();}else if(this.state.paymentRequestBannerShown)k=this.renderPaymentRequestBanner();return (c('React').createElement('div',{className:"_1xfk"},k));}});f.exports=i;}),null);
__d('MercuryThreadlistContainer.react',['Bootloader','immutable','MercuryAPIArgsSource','MercuryFilters','MercuryThreadlistConstants','MessagingTag','P2PJewelBannerContainer.react','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k='search';h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=i.constructor).call.apply(n,[this].concat(p)),this.state={isLoading:true,isSearching:false,unreadMessageRequestThreads:[],threads:c('immutable').Map()},this.$MercuryThreadlistContainer12=function(){return (c('React').createElement(c('P2PJewelBannerContainer.react'),null));},this.$MercuryThreadlistContainer6=function(r,s){if(r===c('MessagingTag').INBOX&&this.props.source!==c('MercuryAPIArgsSource').JEWEL)this.$MercuryThreadlistContainer13();if(!this.$MercuryThreadlistContainer14(r,s)){this.$MercuryThreadlistContainer15(r,s,this.props.threadCount||c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3);}else if(this.state.isLoading){this.setState({isLoading:false},function(){this.$MercuryThreadlistContainer5(r,s);}.bind(this));}else this.$MercuryThreadlistContainer5(r,s);}.bind(this),this.$MercuryThreadlistContainer13=function(){this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,c('MessagingTag').PENDING,c('MercuryFilters').UNREAD,this.$MercuryThreadlistContainer16,true,this.props.source);}.bind(this),this.$MercuryThreadlistContainer9=function(){if(!this.state.isSearching&&!this.state.isLoading&&!this.$MercuryThreadlistContainer1.hasLoadedThreadlist(this.props.folder,this.props.filter))this.$MercuryThreadlistContainer15(this.props.folder,this.props.filter,this.$MercuryThreadlistContainer17(this.props.folder)+c('MercuryThreadlistConstants').JEWEL_MORE_COUNT+1);}.bind(this),this.$MercuryThreadlistContainer15=function(r,s,t){if(!this.$MercuryThreadlistContainer1)return;this.$MercuryThreadlistContainer8();this.setState({isLoading:true},function(){var u=this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,t,r,s||c('MercuryFilters').ALL,function(v){return this.setState({isLoading:false});}.bind(this),true,this.props.source);this.$MercuryThreadlistContainer18={subscriberID:u,folder:r,filter:s};}.bind(this));}.bind(this),this.$MercuryThreadlistContainer5=function(r,s,t){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;this.$MercuryThreadlistContainer7();var u=t||this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(r,s);this.$MercuryThreadlistContainer19=this.$MercuryThreadlistContainer2.getMultiThreadMeta(u,function(v){this.setState({threads:this.state.threads.set(r,u.map(function(w){return v[w];}))});}.bind(this));}.bind(this),this.$MercuryThreadlistContainer16=function(){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;var r=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c('MessagingTag').PENDING,c('MercuryFilters').UNREAD);this.$MercuryThreadlistContainer2.getMultiThreadMeta(r,function(s){this.setState({unreadMessageRequestThreads:r.map(function(t){return s[t];})});}.bind(this));}.bind(this),this.$MercuryThreadlistContainer14=function(r,s){return !!(this.$MercuryThreadlistContainer1&&(this.$MercuryThreadlistContainer1.getThreadCount(r,s)>=c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3||this.$MercuryThreadlistContainer1.hasLoadedThreadlist(r,s)));}.bind(this),this.$MercuryThreadlistContainer17=function(r){var s=this.state.threads.get(r);return s?s.length:0;}.bind(this),this.$MercuryThreadlistContainer7=function(){this.$MercuryThreadlistContainer2&&this.$MercuryThreadlistContainer19&&this.$MercuryThreadlistContainer2.unsubscribe(this.$MercuryThreadlistContainer19);}.bind(this),this.$MercuryThreadlistContainer8=function(){this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer18&&this.$MercuryThreadlistContainer1.unsubscribe(this.$MercuryThreadlistContainer18.subscriberID,this.$MercuryThreadlistContainer18.folder,this.$MercuryThreadlistContainer18.filter);}.bind(this),this.$MercuryThreadlistContainer11=function(r,s){this.setState({isLoading:s,searchThreads:[]},function(){return this.$MercuryThreadlistContainer5(k,c('MercuryFilters').ALL,r);}.bind(this));}.bind(this),this.$MercuryThreadlistContainer10=function(r){this.setState({isSearching:!!r});}.bind(this),m;}l.prototype.componentDidMount=function(){c('Bootloader').loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(m,n,o){this.$MercuryThreadlistContainer1=m.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer2=o.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer3=n.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer4=new (c('SubscriptionsHandler'))();this.$MercuryThreadlistContainer4.addSubscriptions(this.$MercuryThreadlistContainer3.subscribe('threadlist-updated',function(p,q){this.$MercuryThreadlistContainer5(this.props.folder,this.props.filter);}.bind(this)));this.$MercuryThreadlistContainer6(this.props.folder,this.props.filter);}.bind(this),'MercuryThreadlistContainer.react');};l.prototype.componentWillReceiveProps=function(m){if(m.folder!==this.props.folder||m.filter!==this.props.filter)this.$MercuryThreadlistContainer6(m.folder,m.filter);};l.prototype.componentWillUnmount=function(){this.$MercuryThreadlistContainer7();this.$MercuryThreadlistContainer8();this.$MercuryThreadlistContainer4&&this.$MercuryThreadlistContainer4.release();};l.prototype.render=function(){var m=this.props,n=m.ChildClass,o=m.folder,p=m.filter,q=babelHelpers.objectWithoutProperties(m,['ChildClass','folder','filter']),r=this.state.isSearching?this.state.threads.get(k)||[]:this.state.threads.get(o)||[];return c('React').createElement(n,babelHelpers['extends']({},q,{folder:o,isLoaded:!!this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer1.hasLoadedThreadlist(o,p),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onLoadMoreRequest:this.$MercuryThreadlistContainer9,onQuery:this.$MercuryThreadlistContainer10,onSearchResults:this.$MercuryThreadlistContainer11,p2pJewelBannerContainer:this.$MercuryThreadlistContainer12(),threads:r}));};l.propTypes={ChildClass:j.func.isRequired,folder:j.string.isRequired,showCount:j.bool,showPresence:j.bool,source:j.string,threadCount:j.number,viewer:j.string.isRequired};l.defaultProps={source:c('MercuryAPIArgsSource').JEWEL};f.exports=l;}),null);
__d('MercuryThreadlistRowContainer.react',['immutable','ImmutableObject','MercuryParticipants','React','StoreAndPropBasedStateMixin','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryThreadlistRowContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{ChildClass:h.func.isRequired,thread:h.instanceOf(c('ImmutableObject')).isRequired,viewer:h.string.isRequired},statics:{calculateState:function j(k){return {participants:c('immutable').Map(c('immutable').Seq(k.thread.participants).map(function(l){return [l,c('MercuryParticipants').getOrFetch(l)];}))};}},shouldComponentUpdate:function j(k,l){return (!c('shallowEqual')(k,this.props)||!c('immutable').is(l.participants,this.state.participants));},render:function j(){var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return (c('React').createElement(l,babelHelpers['extends']({},m,{participants:this.state.participants})));}});f.exports=i;}),null);
__d('MercuryPresenceIndicator.react',['cx','fbt','Arbiter','AvailableListConstants','MercuryIDs','PresenceStatus','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return n=(o=k.constructor).call.apply(o,[this].concat(q)),this.$MercuryPresenceIndicator2=function(){if(!c('MercuryIDs').isCanonical(this.props.threadID)){return null;}else{var s=c('MercuryIDs').getUserIDFromThreadID(this.props.threadID);return c('PresenceStatus').get(s);}}.bind(this),this.$MercuryPresenceIndicator3=function(s){return "presenceIndicator"+(c('MercuryIDs').isGroupChat(this.props.threadID)?' '+"groupThread":'')+(s==c('AvailableListConstants').ACTIVE?' '+"presenceActive":'');}.bind(this),this.$MercuryPresenceIndicator4=function(s){switch(s){case c('AvailableListConstants').ACTIVE:return i._("\u555f\u7528");default:return null;}},n;}m.prototype.componentDidMount=function(){this.$MercuryPresenceIndicator1=new (c('SubscriptionsHandler'))();this.$MercuryPresenceIndicator1.addSubscriptions(c('Arbiter').subscribe(c('AvailableListConstants').ON_AVAILABILITY_CHANGED,function(){return this.forceUpdate();}.bind(this)));};m.prototype.componentWillUnmount=function(){this.$MercuryPresenceIndicator1&&this.$MercuryPresenceIndicator1.release();};m.prototype.render=function(){var n=this.$MercuryPresenceIndicator2();return c('React').createElement('span',{className:this.$MercuryPresenceIndicator3(n)},c('React').createElement('span',{className:'accessible_elem'},this.$MercuryPresenceIndicator4(n)));};m.propTypes={threadID:l.string.isRequired};f.exports=m;}),null);
__d('MercuryThreadPermalink.react',['HighlanderFinchGating','Link.react','PagesMessengerThreadDialogLink.react','ReactComponentWithPureRenderMixin','React','WebMessengerThreadPermalinks'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryThreadPermalink',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{threadID:h.string.isRequired,viewer:h.string.isRequired,folder:h.string,onClick:h.func},getInitialState:function j(){return {permalinkURI:'#'};},componentDidMount:function j(){this._getPermalinkURI(this.props);},componentWillReceiveProps:function j(k){if(k.threadID!==this.props.threadID||k.folder!==this.props.folder)this._getPermalinkURI(k);},render:function j(){if(c('HighlanderFinchGating').HIGHLANDER_FINCH_GATING)return (c('React').createElement(c('PagesMessengerThreadDialogLink.react'),{className:this.props.className,threadID:this.props.threadID,viewer:this.props.viewer,folder:this.props.folder},this.props.children));return (c('React').createElement(c('Link.react'),{className:this.props.className,href:this.state.permalinkURI,onClick:this.props.onClick,role:'button'},this.props.children));},_getPermalinkURI:function j(k){if(c('HighlanderFinchGating').HIGHLANDER_FINCH_GATING)return;this.setState(this.getInitialState());c('WebMessengerThreadPermalinks').getThreadURI(k.threadID,function(l){return this.isMounted()&&this.setState({permalinkURI:l});}.bind(this),k.folder);}});f.exports=i;}),null);
__d('MercuryThreadReadToggle.react',['fbt','invariant','MercuryThreadActions','React','ReadToggle.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return n=(o=k.constructor).call.apply(o,[this].concat(q)),this.$MercuryThreadReadToggle1=function(s){s.preventDefault();s.stopPropagation();var t=c('MercuryThreadActions').getForFBID(this.props.viewer);this.props.unreadCount>0?t.markRead(this.props.threadID):t.markUnread(this.props.threadID);}.bind(this),n;}m.prototype.render=function(){!(this.props.unreadCount>=0)?i(0):void 0;return c('React').createElement(c('ReadToggle.react'),{isRead:this.props.unreadCount===0,onClick:this.$MercuryThreadReadToggle1,readLabel:h._("\u6a19\u793a\u70ba\u672a\u8b80"),unreadLabel:h._("\u6a19\u793a\u70ba\u5df2\u8b80\u8a0a\u606f")});};m.propTypes={threadID:l.string.isRequired,viewer:l.string.isRequired,unreadCount:l.number.isRequired};f.exports=m;}),null);
__d('MessagesJewelInlineThumbnail.react',['cx','MercuryAttachmentType','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.$MessagesJewelInlineThumbnail1=function(){var r=this.props.thread;if(!r.snippet_attachments)return [];return r.snippet_attachments.filter(function(s){return s.attach_type===c('MercuryAttachmentType').PHOTO;});}.bind(this),m;}l.prototype.render=function(){var m=this.$MessagesJewelInlineThumbnail1();if(m.length===0)return c('React').createElement('span',null);var n=m[0].thumbnail_url;if(!n)return c('React').createElement('span',null);var o=c('React').createElement('span',{className:"_56hv"},c('React').createElement('i',{style:{backgroundImage:'url('+n+')'}}));if(m.length>1)o=c('React').createElement('span',null,c('React').createElement('span',{className:"_56hy"}),o);return o;};l.propTypes={thread:k.object.isRequired};f.exports=l;}),null);
__d('MessagesJewelThreadListRow.react',['cx','ImageBlock.react','immutable','ImmutableObject','MercuryPresenceIndicator.react','MercurySeenIndicator.react','MercuryThreadImage.react','MercuryThreadPermalink.react','MercuryThreadReadToggle.react','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryThreadTitle.react','MessagesJewelInlineThumbnail.react','MNAdsMessageUtils','React','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.$MessagesJewelThreadListRow2=function(){if(!this.props.showPresence)return null;return (c('React').createElement(c('MercuryPresenceIndicator.react'),{threadID:this.props.thread.thread_id}));}.bind(this),this.$MessagesJewelThreadListRow3=function(r){return (c('React').createElement(c('MercuryThreadImage.react'),{size:r,thread:this.props.thread,useBackground:true,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadListRow1=function(){return (c('React').createElement(c('MercuryThreadTitle.react'),{thread:this.props.thread,viewer:this.props.viewer,showUnreadCount:true}));}.bind(this),this.$MessagesJewelThreadListRow5=function(){return (c('React').createElement(c('MercuryThreadSnippet.react'),{participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadListRow6=function(){return (c('React').createElement(c('MercuryThreadTimestamp.react'),{time:this.props.thread.timestamp,title:this.props.thread.timestamp_absolute,text:this.props.thread.timestamp_relative}));}.bind(this),this.$MessagesJewelThreadListRow4=function(){return (c('React').createElement(c('MercurySeenIndicator.react'),{thread:this.props.thread,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadListRow7=function(){return (c('React').createElement(c('MercuryThreadReadToggle.react'),{threadID:this.props.thread.thread_id,viewer:this.props.viewer,unreadCount:this.props.thread.unread_count}));}.bind(this),m;}l.prototype.render=function(){var m=c('UserAgent').isBrowser('Chrome')&&!c('UserAgent').isPlatform('Windows')?c('React').createElement('div',{className:'author fixemoji'},this.$MessagesJewelThreadListRow1(),this.$MessagesJewelThreadListRow2()):c('React').createElement('div',{className:'author'},c('React').createElement('strong',null,this.$MessagesJewelThreadListRow1()),this.$MessagesJewelThreadListRow2()),n=c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},c('React').createElement('div',{className:"MercuryThreadImage _4qeb"},this.$MessagesJewelThreadListRow3()),c('React').createElement('div',{className:'content'},m,c('React').createElement('div',{className:'snippet preview'},this.$MessagesJewelThreadListRow4(),this.$MessagesJewelThreadListRow5()),c('React').createElement('div',{className:'time'},c('MNAdsMessageUtils').isAdsMessageRequest(this.props.thread)?c('MNAdsMessageUtils').renderAdsMessageRequestStatus():this.$MessagesJewelThreadListRow6())),c('React').createElement('div',null,c('React').createElement(c('MessagesJewelInlineThumbnail.react'),{thread:this.props.thread}),c('React').createElement('div',{className:'x_div'},this.$MessagesJewelThreadListRow7())));return c('React').createElement('li',{className:this.props.thread.unread_count>0?"jewelItemNew":''},c('React').createElement(c('MercuryThreadPermalink.react'),{className:'messagesContent',threadID:this.props.thread.thread_id,viewer:this.props.viewer,folder:this.props.thread.folder,onClick:this.props.onClick},n));};l.propTypes={onClick:k.func,participants:k.instanceOf(c('immutable').Map).isRequired,showPresence:k.bool,thread:k.instanceOf(c('ImmutableObject')).isRequired,viewer:k.string.isRequired,wasSeenByAll:k.bool};f.exports=l;}),null);
__d('MessagesJewelThreadlistRowContainer.react',['ChatOpenTab','ChatOpenTabEventLogger','FantaTabActions','ImmutableObject','MercuryConfig','MercuryDelayedRoger','MercuryThreadlistRowContainer.react','MessagesJewelThreadListRow.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('MercuryDelayedRoger').get(),i=c('React').PropTypes,j=c('React').createClass({displayName:'MessagesJewelThreadlistRowContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(h)],propTypes:{thread:i.instanceOf(c('ImmutableObject')).isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(l){return {wasSeenByAll:h.wasSeenByAll(l.thread.thread_id)};}},render:function k(){return (c('React').createElement(c('MercuryThreadlistRowContainer.react'),{ChildClass:c('MessagesJewelThreadListRow.react'),onClick:this._handleClick,showPresence:c('ChatOpenTab').canOpenTab(),thread:this.props.thread,viewer:this.props.viewer,wasSeenByAll:this.state.wasSeenByAll}));},_handleClick:function k(l){if(l.button===1||l.altKey||l.ctrlKey||l.metaKey||l.shiftKey)return;if(!c('ChatOpenTab').canOpenTab())return;l.preventDefault();var m=this.props.thread.thread_id;if(c('MercuryConfig').FantaTabs){c('FantaTabActions').openTab(m);c('ChatOpenTabEventLogger').log('jewel',m);}else c('ChatOpenTab').openThread(m,'jewel');}});f.exports=j;}),null);
__d('MessagesJewelThreadList.react',['cx','fbt','BootloadedComponent.react','ImmutableObject','JewelConstants','JSResource','Link.react','MessagesJewelThreadlistRowContainer.react','MessagingTag','React','ScrollableArea.react','XUISpinner.react','debounce','getViewportDimensions','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=160,m=450,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return p=(q=k.constructor).call.apply(q,[this].concat(s)),this.$MessagesJewelThreadList2=function(){return Math.min(c('JewelConstants').FLYOUT_MAX_HEIGHT||m,c('getViewportDimensions')().height-l);},this.$MessagesJewelThreadList6=function(){if(this.props.isLoaded){if(this.props.folder===c('MessagingTag').PENDING)return (c('React').createElement('div',{className:"_16bh _16bi"},c('React').createElement(c('Link.react'),{onClick:this.$MessagesJewelThreadList7},i._("\u986f\u793a\u7be9\u9078\u5f8c\u7684\u8981\u6c42"))));return null;}if(this.props.isLoading)return (c('React').createElement(c('XUISpinner.react'),{className:"jewelLoading"}));return (c('React').createElement('div',{className:"_v8y"},c('React').createElement(c('Link.react'),{href:'#',onClick:this.$MessagesJewelThreadList8},i._("\u986f\u793a\u4e4b\u524d\u7684\u8a0a\u606f"))));}.bind(this),this.$MessagesJewelThreadList3=function(){if(this.props.isLoaded)return;var u=this.refs.scrollable.getArea();if(u.getScrollTop()+u.getClientHeight()>=u.getScrollHeight()-1)this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}.bind(this),this.$MessagesJewelThreadList8=function(u){u.preventDefault();this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest();}.bind(this),this.$MessagesJewelThreadList4=function(){var u=this.props.newMessageRequestThreads;if(!this.props.jewelRequestsUI||this.props.folder===c('MessagingTag').PENDING||!u||u.length===0)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('li',{style:{height:60}}),bootloadLoader:c('JSResource')('MessagesJewelMessageRequestsRow.react').__setRef('MessagesJewelThreadList.react'),onClick:this.$MessagesJewelThreadList9,threads:u,viewer:this.props.viewer}));}.bind(this),this.$MessagesJewelThreadList5=function(){if(!this.props.jewelRequestsUI||this.props.folder!==c('MessagingTag').PENDING)return null;return (c('React').createElement('li',{className:"_16bh _16bi"},i._("\u958b\u555f\u8981\u6c42\u53ef\u53d6\u5f97\u66f4\u591a\u6709\u95dc\u8a0a\u606f\u5bc4\u4ef6\u8005\u7684\u8cc7\u6599\u3002"),c('React').createElement('br',null),i._("\u5728\u4f60\u63a5\u53d7\u4e4b\u524d\uff0c\u5c0d\u65b9\u4e0d\u6703\u77e5\u9053\u4f60\u5df2\u7d93\u770b\u904e\u8a0a\u606f\u3002")));}.bind(this),this.$MessagesJewelThreadList9=function(u){if(this.props.onMessageRequestsClick)this.props.onMessageRequestsClick(u);}.bind(this),this.$MessagesJewelThreadList7=function(u){if(this.props.onFilteredRequestsClick)this.props.onFilteredRequestsClick(u);}.bind(this),this.state={height:this.$MessagesJewelThreadList2()},p;}o.prototype.componentDidMount=function(){this.$MessagesJewelThreadList1=Event.listen(window,'resize',c('debounce')(function(){this.setState({height:this.$MessagesJewelThreadList2()});}.bind(this)));};o.prototype.componentWillUnmount=function(){this.$MessagesJewelThreadList1.remove();};o.prototype.render=function(){return c('React').createElement(c('ScrollableArea.react'),{className:"_2q3u",height:this.state.height,onScroll:c('throttle')(this.$MessagesJewelThreadList3,50),ref:'scrollable'},c('React').createElement('ul',{className:'jewelContent'},this.props.p2pJewelBannerContainer?c('React').createElement('li',null,this.props.p2pJewelBannerContainer):null,this.$MessagesJewelThreadList4(),this.$MessagesJewelThreadList5(),this.props.threads.map(function(p){return c('React').createElement(c('MessagesJewelThreadlistRowContainer.react'),{key:p.thread_id,thread:p,viewer:this.props.viewer});}.bind(this))),this.$MessagesJewelThreadList6());};o.propTypes={isLoaded:n.bool,isLoading:n.bool,jewelRequestsUI:n.bool,onLoadMoreRequest:n.func,p2pJewelBannerContainer:n.element,threads:n.arrayOf(n.instanceOf(c('ImmutableObject'))).isRequired,viewer:n.string.isRequired};f.exports=o;}),null);
__d('MercuryJewelThreadlistControl',['csx','cx','fbt','ArbiterMixin','CurrentUser','CSS','DOM','Event','JSLogger','MercuryConfig','MercuryFilters','MercuryThreadlistConstants','MercuryThreadlistContainer.react','MessagesJewelThreadList.react','MessagingTag','WebMessengerPermalinkConstants','React','ReactDOM','MercuryThreadInformer','MercuryUnreadState'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('MercuryThreadInformer').get(),l=c('MercuryUnreadState').get(),m=c('JSLogger').create('mercury_jewel'),n=c('MessagingTag').PENDING,o=c('WebMessengerPermalinkConstants').PENDING_PATH,p='back_to_inbox';function q(u){var v=u.getFlyout();this._jewelController=u;this._threadlistContainer=c('DOM').find(v,"._3v_l");this._currentFolder=c('MessagingTag').INBOX;this._currentFilter=c('MercuryFilters').ALL;this._jewelTabLinks={};this._jewelTabCounts={};this._jewelTabLinks[c('MessagingTag').INBOX]=c('DOM').find(v,"._1sde");this._jewelTabCounts[c('MessagingTag').INBOX]=c('DOM').find(v,"._1sdg");c('Event').listen(this._jewelTabLinks[c('MessagingTag').INBOX],'click',r.bind(this,c('MessagingTag').INBOX,c('MercuryFilters').ALL));if(!c('MercuryConfig').JewelRequestsUI){this._jewelTabLinks[n]=c('DOM').find(v,"._1sdf");this._jewelTabCounts[n]=c('DOM').find(v,"._1sdh");c('Event').listen(this._jewelTabLinks[n],'click',r.bind(this,n,c('MercuryFilters').ALL));}else{this._jewelTabLinks[p]=c('DOM').find(v,"._34zq");c('Event').listen(this._jewelTabLinks[p],'click',r.bind(this,c('MessagingTag').INBOX,c('MercuryFilters').ALL));}this._markAllReadLink=c('DOM').find(v,"._1c1m");this._seeAllLink=c('DOM').find(v,'.seeMore');c('Event').listen(this._markAllReadLink,'click',function(w){l.markFolderAsRead(this._currentFolder);w.kill();}.bind(this));k.subscribe('unread-updated',s.bind(this));s.bind(this)();this.render();m.bump('opened_threadlist_'+this._currentFolder);}Object.assign(q.prototype,c('ArbiterMixin'));Object.assign(q.prototype,{render:function u(){c('ReactDOM').render(c('React').createElement(c('MercuryThreadlistContainer.react'),{ChildClass:c('MessagesJewelThreadList.react'),viewer:c('CurrentUser').getID(),folder:this._currentFolder,filter:this._currentFilter,jewelRequestsUI:c('MercuryConfig').JewelRequestsUI,onMessageRequestsClick:this._handleMessageRequestsClick.bind(this),onFilteredRequestsClick:this._handleFilteredRequestsClick.bind(this)}),this._threadlistContainer);},_handleMessageRequestsClick:function u(v){v.preventDefault();r.call(this,c('MessagingTag').PENDING,c('MercuryFilters').ALL);},_handleFilteredRequestsClick:function u(v){v.preventDefault();r.call(this,c('MessagingTag').OTHER,c('MercuryFilters').ALL);}});function r(u,v){if(this._currentFolder!==u||this._currentFilter!==v){var w=this._currentFolder,x=u===c('MessagingTag').INBOX,y=u;m.bump('opened_threadlist_'+u);if(this._jewelTabLinks[y])c('CSS').addClass(this._jewelTabLinks[y],"_1sdd");if(this._jewelTabLinks[w])c('CSS').removeClass(this._jewelTabLinks[w],"_1sdd");this._currentFolder=u;this._currentFilter=v;if(x){this._seeAllLink.href=c('WebMessengerPermalinkConstants').BASE_PATH;}else this._seeAllLink.href=o;if(c('MercuryConfig').JewelRequestsUI){c('CSS').conditionShow(this._jewelTabLinks[c('MessagingTag').INBOX],x);c('CSS').conditionShow(this._jewelTabLinks[p],!x);}this.render();}}function s(){t.call(this,c('MessagingTag').INBOX);if(!c('MercuryConfig').JewelRequestsUI)t.call(this,n);}function t(u){var v;if(l.exceedsMaxCount(u)){v=c('MercuryThreadlistConstants').MAX_UNREAD_COUNT;}else v=l.getUnreadCount(u);var w=this._jewelTabCounts[u];if(!w)return;if(v>0){if(v==c('MercuryThreadlistConstants').MAX_UNREAD_COUNT)v+='+';c('DOM').setContent(w,j._("\uff08{unread_count}\uff09",[j.param('unread_count',v)]));}else c('DOM').setContent(w,'');}f.exports=q;}),null);
__d('MercuryJewel',['MercuryChannelHandlerDEPRECATED','Arbiter','MercuryJewelCountControl','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('MercuryChannelHandlerDEPRECATED').get().turnOn();var h=false;function i(j,k){'use strict';c('MercuryJewelCountControl').constructStores();c('MercuryServerPayloadPreprocessor').get().handleUpdate(k);this.$MercuryJewel1=new (c('MercuryJewelCountControl'))(j);if(j.getRoot()&&j.isOpen()){this.$MercuryJewel2(j);}else j.subscribeOnce('opened',this.$MercuryJewel2.bind(this,j));}i.prototype.$MercuryJewel2=function(j){'use strict';if(!h){e(['MercuryJewelThreadlistControl'],function(k){this.$MercuryJewel3=new k(j);}.bind(this));c('Arbiter').inform('mercury-jewel/opened',null,c('Arbiter').BEHAVIOR_STATE);h=true;}};f.exports=i;}),null);