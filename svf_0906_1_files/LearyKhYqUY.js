if (self.CavalryLogger) { CavalryLogger.start_js(["vYcTw"]); }

__d('AppsDivebarDisplayController',['cx','AppsDivebarConfigData','AsyncRequest','Arbiter','CSS','UIPagelet','$'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=171,j={isVisible:function k(){if(this._visible!==undefined)return this._visible;this._visible=!c('AppsDivebarConfigData').hidden;return this._visible;},showApps:function k(){this._visible=true;var l={fb_source_category:'sidebar'};c('UIPagelet').loadFromEndpoint('GamesDivebarPagelet','pagelet_canvas_nav_content',l);c('CSS').show(c('$')('apps_gripper'));c('CSS').show(c('$')('pagelet_canvas_nav_content'));c('CSS').addClass(c('$')('pagelet_canvas_nav_content'),"_4woj");c('Arbiter').inform('AppsDivebar/show-apps');new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:''+i,menu:true}).setMethod('POST').send();},hideApps:function k(){this._visible=false;c('CSS').hide(c('$')('pagelet_canvas_nav_content'));c('CSS').hide(c('$')('apps_gripper'));c('Arbiter').inform('AppsDivebar/hide-apps');new (c('AsyncRequest'))('/ajax/feed/apps/resize').setData({height:'1',menu:true}).setMethod('POST').send();}};f.exports=j;}),null);
__d('ChatSidebarDropdownConstants',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={SOUND:'sound',ADVANCED_SETTINGS:'advanced_settings',BLOCK_SETTINGS:'block_settings',TURN_OFF_DIALOG:'turn_off_dialog',CLOSE_ALL_TABS:'close_all_tabs',LOWER_ALL_TABS:'lower_all_tabs',SIDEBAR:'sidebar',HIDE_GROUPS:'hide_groups',ONLINE:'online',VIDEOCALL_ON:'videoon',VIDEOCALL_OFF:'videooff',PAUSE:'pause',SHOW_APPS:'show_apps',HIDE_APPS:'hide_apps',SHOW_TICKER:'show_ticker',HIDE_TICKER:'hide_ticker',EMOJI_SETTINGS:'emoji_settings'};f.exports=h;}),null);
__d('ChatSidebarDropdown.react',['cx','fbt','AppsDivebarDisplayController','Arbiter','AsyncRequest','ChatConfig','ChatOptions','ChatSidebarDropdownConstants','ChatTabActions','ChatVisibility','ContextualDialogArrow','ContextualLayerAutoFlip','FantaTabActions','FBRTCCallBlockingStore','FBRTCSupport','LayerHideOnBlur','Link.react','LogHistory','MenuSeparator.react','MercuryConfig','PopoverMenu.react','PresencePrivacy','PresenceState','React','ReactXUIMenu','SidebarType','SubscriptionsHandler','TrackingNodes','URI','XChatEmojiSettingsController','emptyFunction','ge','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('ReactXUIMenu').SelectableItem,m=c('ReactXUIMenu').SelectableMenu,n=c('ReactXUIMenu').Item,o=c('React').PropTypes,p=c('LogHistory').getInstance('blackbird');j=babelHelpers.inherits(q,c('React').PureComponent);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return r=(s=k.constructor).call.apply(s,[this].concat(u)),this.$ChatSidebarDropdown2=function(){var w=c('ge')('pagelet_ticker');return !!(w&&w.offsetHeight!==0);},this.$ChatSidebarDropdown3=function(w,x){var y=x?'sidebar_dropdown_visibility_error':'sidebar_dropdown_set_visibility';p.debug(y,JSON.stringify({action:w}));},this.$ChatSidebarDropdown4=function(w,x){if(this.state.pendingChange)return;this.setState({pendingChange:true});var y={};y[w]=!x;c('ChatOptions').setSetting(w,!x,'mini_sidebar_menu');new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(c('PresenceState').doSync).setErrorHandler(function(){return c('ChatOptions').setSetting(w,x,'mini_sidebar_menu_error');}).setFinallyHandler(function(){return this.setState({pendingChange:false});}.bind(this)).setData(y).setAllowCrossPageTransition(true).send();}.bind(this),this.$ChatSidebarDropdown5=function(w,x){var y=true;switch(w){case c('ChatSidebarDropdownConstants').SOUND:this.$ChatSidebarDropdown4(w,x);break;case c('ChatSidebarDropdownConstants').ADVANCED_SETTINGS:case c('ChatSidebarDropdownConstants').TURN_OFF_DIALOG:this.$ChatSidebarDropdown3(w,false);break;case c('ChatSidebarDropdownConstants').LOWER_ALL_TABS:if(c('MercuryConfig').FantaTabs){c('FantaTabActions').minimizeAllTabs();}else c('ChatTabActions').lowerAllTabs();break;case c('ChatSidebarDropdownConstants').CLOSE_ALL_TABS:if(c('MercuryConfig').FantaTabs){c('FantaTabActions').closeAllTabs();}else c('ChatTabActions').closeAllTabs();this.$ChatSidebarDropdown3(w,false);break;case c('ChatSidebarDropdownConstants').HIDE_GROUPS:this.$ChatSidebarDropdown4(w,x);break;case c('ChatSidebarDropdownConstants').SIDEBAR:this.props.onToggleSidebar();y=false;break;case c('ChatSidebarDropdownConstants').ONLINE:!this.state.isOnline?c('ChatVisibility').goOnline():this.$ChatSidebarDropdown3(w,true);break;case c('ChatSidebarDropdownConstants').VIDEOCALL_ON:c('FBRTCCallBlockingStore').turnOnVideoCalling();break;case c('ChatSidebarDropdownConstants').VIDEOCALL_OFF:break;case c('ChatSidebarDropdownConstants').PAUSE:break;case c('ChatSidebarDropdownConstants').SHOW_TICKER:c('Arbiter').inform('ChatSidebarDropdown/openTicker');break;case c('ChatSidebarDropdownConstants').HIDE_TICKER:c('Arbiter').inform('ChatSidebarDropdown/closeTicker');break;case c('ChatSidebarDropdownConstants').SHOW_APPS:c('AppsDivebarDisplayController').showApps();break;case c('ChatSidebarDropdownConstants').HIDE_APPS:c('AppsDivebarDisplayController').hideApps();break;}if(y&&this.refs.menu)this.refs.menu.hidePopover();}.bind(this),this.$ChatSidebarDropdown6=function(w,x){var y=x.item.getValue(),z=x.item.isSelected&&x.item.isSelected();this.$ChatSidebarDropdown5(y,!!z);}.bind(this),this.$ChatSidebarDropdown7=function(){return (c('React').createElement(l,{value:c('ChatSidebarDropdownConstants').SOUND,selected:c('ChatOptions').getSetting(c('ChatSidebarDropdownConstants').SOUND)},i._("\u804a\u5929\u5ba4\u97f3\u6548")));},this.$ChatSidebarDropdown8=function(){if(!c('ChatConfig').get('messenger_new_emoji_set'))return null;var w=c('XChatEmojiSettingsController').getURIBuilder().getURI();return (c('React').createElement(n,{href:w,rel:'dialog',value:c('ChatSidebarDropdownConstants').EMOJI_SETTINGS},i._("\u8868\u60c5\u7b26\u865f")));},this.$ChatSidebarDropdown9=function(){return (c('React').createElement(n,{href:new (c('URI'))('/settings?tab=blocking'),value:c('ChatSidebarDropdownConstants').BLOCK_SETTINGS},i._("\u5c01\u9396\u8a2d\u5b9a")));},this.$ChatSidebarDropdown10=function(){return (c('React').createElement(n,{href:new (c('URI'))('/ajax/chat/privacy/settings_dialog.php'),rel:'dialog',value:c('ChatSidebarDropdownConstants').ADVANCED_SETTINGS},i._("\u9032\u968e\u8a2d\u5b9a\u22ef\u22ef")));},this.$ChatSidebarDropdown11=function(){return (c('React').createElement(n,{value:c('ChatSidebarDropdownConstants').LOWER_ALL_TABS},i._("Collapse All Chat Tabs")));},this.$ChatSidebarDropdown12=function(){return (c('React').createElement(n,{value:c('ChatSidebarDropdownConstants').CLOSE_ALL_TABS},i._("\u95dc\u9589\u5168\u90e8\u7684\u804a\u5929\u5ba4\u6a19\u7c64")));},this.$ChatSidebarDropdown13=function(){return (c('React').createElement(n,{className:"_2xvi",value:c('ChatSidebarDropdownConstants').SIDEBAR},i._("\u96b1\u85cf\u908a\u6b04")));},this.$ChatSidebarDropdown14=function(){if(this.props.sidebarType===c('SidebarType').MINI_SIDEBAR||this.props.sidebarType===c('SidebarType').BUDDYLIST_NUB)return null;return (c('React').createElement(l,{value:c('ChatSidebarDropdownConstants').HIDE_GROUPS,selected:c('ChatOptions').getSetting(c('ChatSidebarDropdownConstants').HIDE_GROUPS)},i._("\u96b1\u85cf\u7fa4\u7d44")));}.bind(this),this.$ChatSidebarDropdown15=function(){var w=c('ChatVisibility').isOnline(),x=w?new (c('URI'))('/ajax/chat/privacy/settings_dialog.php').addQueryData('dialog_type','turn_off_dialog'):'#',y=w?i._("\u95dc\u9589\u804a\u5929\u5ba4"):i._("\u958b\u555f\u804a\u5929\u5ba4"),z=w?c('ChatSidebarDropdownConstants').TURN_OFF_DIALOG:c('ChatSidebarDropdownConstants').ONLINE;return (c('React').createElement(n,{href:x,rel:w?'dialog':'',value:z},y));},this.$ChatSidebarDropdown16=function(){if(!c('FBRTCSupport').isVideoCallBlockingSupported())return;var w=this.state.isCallBlocked,x=w?'#':new (c('URI'))('/videocall/off/'),y=w?i._("\u958b\u555f\u8996\u8a0a\uff0f\u8a9e\u97f3\u901a\u8a71"):i._("\u95dc\u9589\u8996\u8a0a\uff0f\u8a9e\u97f3\u901a\u8a71"),z=w?c('ChatSidebarDropdownConstants').VIDEOCALL_ON:c('ChatSidebarDropdownConstants').VIDEOCALL_OFF;return (c('React').createElement(n,{href:x,rel:w?'':'dialog',value:z},y));}.bind(this),this.$ChatSidebarDropdown17=function(){if(!c('ChatConfig').get('has_apps_option')||this.props.sidebarType!==c('SidebarType').SIDEBAR)return null;var w=this.state.appsVisible,x=w?i._("\u96b1\u85cf\u904a\u6232"):i._("\u986f\u793a\u904a\u6232"),y=w?c('ChatSidebarDropdownConstants').HIDE_APPS:c('ChatSidebarDropdownConstants').SHOW_APPS;return [c('React').createElement(c('MenuSeparator.react'),{key:'apps_separator'}),c('React').createElement(n,{value:y,key:'apps_menu'},x)];}.bind(this),this.$ChatSidebarDropdown18=function(){if(!c('ChatConfig').get('has_ticker_toggle_option')||this.props.sidebarType!==c('SidebarType').SIDEBAR)return null;var w=this.state.isTickerVisible,x=w?i._("\u96b1\u85cf\u5373\u6642\u52d5\u614b"):i._("\u986f\u793a\u5373\u6642\u52d5\u614b"),y=w?c('ChatSidebarDropdownConstants').HIDE_TICKER:c('ChatSidebarDropdownConstants').SHOW_TICKER;return [c('React').createElement(c('MenuSeparator.react'),{key:'ticker_separator'}),c('React').createElement(n,{value:y,key:'ticker_menu'},x)];}.bind(this),this.$ChatSidebarDropdown19=function(){return (c('React').createElement(m,{className:'fbChatSidebarDropdown/PopoverMenu',multiple:true,onItemClick:this.$ChatSidebarDropdown6},this.$ChatSidebarDropdown7(),this.$ChatSidebarDropdown8(),this.$ChatSidebarDropdown9(),this.$ChatSidebarDropdown10(),c('React').createElement(c('MenuSeparator.react'),null),this.$ChatSidebarDropdown11(),this.$ChatSidebarDropdown12(),this.$ChatSidebarDropdown13(),this.$ChatSidebarDropdown14(),this.$ChatSidebarDropdown15(),this.$ChatSidebarDropdown16(),this.$ChatSidebarDropdown17(),this.$ChatSidebarDropdown18()));}.bind(this),this.state={appsVisible:c('AppsDivebarDisplayController').isVisible(),isOnline:c('ChatVisibility').isOnline(),isTickerVisible:this.$ChatSidebarDropdown2(),isCallBlocked:c('FBRTCCallBlockingStore').getBlockingStatus(),pendingChange:false},r;}q.prototype.componentDidMount=function(){this.$ChatSidebarDropdown1=new (c('SubscriptionsHandler'))();this.$ChatSidebarDropdown1.addSubscriptions(c('Arbiter').subscribe(['Ticker/resized','ticker/show'],function(){this.setState({isTickerVisible:this.$ChatSidebarDropdown2()});}.bind(this)),c('Arbiter').subscribe(['AppsDivebar/show-apps','AppsDivebar/hide-apps'],function(){this.setState({appsVisible:c('AppsDivebarDisplayController').isVisible()});}.bind(this)),c('PresencePrivacy').subscribe('privacy-user-presence-changed',function(){this.setState({isOnline:c('ChatVisibility').isOnline()});}.bind(this)),c('Arbiter').subscribe('buddylist/hide',function(){this.refs.menu.hidePopover();}.bind(this)),c('Arbiter').subscribe('sidebar/visibility',function(r,s){if(!s)this.refs.menu.hidePopover();}.bind(this)),c('FBRTCCallBlockingStore').addListener(function(){this.setState({isCallBlocked:c('FBRTCCallBlockingStore').getBlockingStatus()});}.bind(this)));};q.prototype.componentWillUnmount=function(){this.$ChatSidebarDropdown1&&this.$ChatSidebarDropdown1.release();};q.prototype.render=function(){var r=i._("\u9078\u9805"),s=c('joinClasses')(this.props.className,"_5qth"+(' '+"_5vm9")+(!c('ChatVisibility').isOnline()?' '+"_5vma":'')),t=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.DROPDOWN_BUTTON);return (c('React').createElement(c('PopoverMenu.react'),{alignh:'right',alignv:'top',className:s,layerBehaviors:[c('ContextualLayerAutoFlip'),c('ContextualDialogArrow'),c('LayerHideOnBlur')],menu:this.$ChatSidebarDropdown19(),onHide:this.props.onHide,onShow:this.props.onShow,ref:'menu'},c('React').createElement(c('Link.react'),{'aria-label':r,className:"_5vmb button",'data-ft':t,'data-hover':'tooltip','data-tooltip-content':r,'data-tooltip-position':'below',href:'#'})));};q.propTypes={className:o.string,onHide:o.func,onShow:o.func,onToggleSidebar:o.func.isRequired,sidebarType:o.string.isRequired};q.defaultProps={className:'',onHide:c('emptyFunction'),onShow:c('emptyFunction')};f.exports=q;}),null);