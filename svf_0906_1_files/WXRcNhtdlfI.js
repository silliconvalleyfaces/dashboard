if (self.CavalryLogger) { CavalryLogger.start_js(["6hAeo"]); }

__d('Spotlight',['csx','cx','Arbiter','ArbiterMixin','DOM','JSXDOM','Layer','LayerAutoFocus','LayerTabIsolation','ModalLayer','Vector','classWithMixins','joinClasses','mixin'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('classWithMixins')(c('Layer'),c('mixin')(c('ArbiterMixin'))));k=j&&j.prototype;function l(n,o){'use strict';k.constructor.call(this,n,o);this.stageMinSize=new (c('Vector'))(0,0);this.stagePadding=new (c('Vector'))(0,0);}l.prototype._buildWrapper=function(n,o){'use strict';var p=c('joinClasses')("_n8 _3qx",n.rootClassName);return (c('JSXDOM').div({className:p},c('JSXDOM').div({className:"_n9"},o)));};l.prototype._getDefaultBehaviors=function(){'use strict';return k._getDefaultBehaviors.call(this).concat([m,c('LayerAutoFocus'),c('LayerTabIsolation'),c('ModalLayer')]);};l.prototype.getContentRoot=function(){'use strict';if(!this._content)this._content=c('DOM').find(this.getRoot(),"div._n3");return this._content;};l.prototype.configure=function(n){'use strict';if(n.stageMinSize)this.stageMinSize=n.stageMinSize;if(n.stagePadding)this.stagePadding=n.stagePadding;};l.prototype.onContentLoaded=function(){'use strict';this.inform('content-load');};l.prototype.updatePermalink=function(n){'use strict';this.inform('permalinkchange',n);};Object.assign(l.prototype,{stageMinSize:null,stagePadding:null});function m(n){'use strict';this._layer=n;}m.prototype.enable=function(){'use strict';this._subscription=this._layer.subscribe(['show','hide'],function(n,o){if(n==='show'){c('Arbiter').inform('layer_shown',{type:'Spotlight'});}else c('Arbiter').inform('layer_hidden',{type:'Spotlight'});});};m.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};Object.assign(m.prototype,{_subscription:null});f.exports=l;}),null);
__d('Spotlight.react',['LayerHideOnBlur','LayerHideOnEscape','ReactLayer','Spotlight'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('ReactLayer').createClass({getDefaultEnabledBehaviors:function i(){return {hideOnBlur:c('LayerHideOnBlur'),hideOnEscape:c('LayerHideOnEscape')};},createLayer:function i(j){var k=this.enumerateBehaviors(this.props.behaviors),l={addedBehaviors:k,rootClassName:this.props.rootClassName},m=new (c('Spotlight'))(l,j);m.conditionShow(this.props.shown);if(this.props.onBeforeHide)m.subscribe('beforehide',this.props.onBeforeHide);if(this.props.onHide)m.subscribe('hide',this.props.onHide);return m;},receiveProps:function i(j){this.layer.conditionShow(j.shown);}});f.exports=h;}),null);
__d('BrowserPushCommands',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='browser_push_ack',i='browser_push_redirect',j='browser_push_window_visible',k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k;}),null);
__d('BrowserPushMessageHandler',['BrowserPushCommands','EventListener','isFacebookURI','URISchemes'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(event){if(event.data.command&&event.data.command===c('BrowserPushCommands').REDIRECT){if(window.onbeforeunload()===undefined){event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:true});}else{event.ports[0].postMessage({command:c('BrowserPushCommands').ACK,success:false});return;}var j=event.data.uri;if(/^([^.:/?#]+):/.test(j)&&!c('URISchemes').isAllowed(/^([^.:/?#]+):/.exec(j)[0])&&c('isFacebookURI')(j))throw new Error('goURI: URI scheme rejected, URI: '+j);window.location.href=j;}}var i={registerRedirectHandler:function j(){c('EventListener').listen(window,'message',function(event){if(event.origin==='')h(event);});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener('message',function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp('^'+window.location.protocol+'//'+window.location.host+'$').test(event.origin))h(event);});}};f.exports=i;}),null);
__d('BrowserPushVisibilityChanger',['BrowserPushCommands','ClientServiceWorkerMessage','Visibility'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){new (c('ClientServiceWorkerMessage'))(c('BrowserPushCommands').WINDOW_VISIBLE,null).sendViaController();}var i={listenForVisibility:function j(){if(!c('Visibility').isHidden())h();c('Visibility').addListener(c('Visibility').VISIBLE,h);}};f.exports=i;}),null);
__d('ServiceWorkerRegistration',['Promise','ClientServiceWorkerMessage'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='serviceWorker' in navigator;function i(){var k=navigator.serviceWorker;if(!h||!k)throw new Error('serviceWorker is not supported in this browser');return k;}var j={isSupported:function k(){return h;},registerWorkerIfUnregistered:function k(l){var m=i();return new (c('Promise'))(function(n,o){this.getWorkerRegistration(l).then(function(p){if(!p){m.register(l).then(function(){m.ready.then(n);});}else n(p);});}.bind(this));},unregisterControllingWorker:function k(){return new (c('Promise'))(function(l,m){var n=new (c('ClientServiceWorkerMessage'))('unregister',{},function(){l(true);});n.sendViaController();});},getWorkerRegistration:function k(l){var m=i();return m.getRegistration(l);}};f.exports=j;}),null);
__d('PushRegistration',['Promise','BrowserPushMessageHandler','BrowserPushVisibilityChanger','Map','ServiceWorkerRegistration'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=window.Notification,i=new (c('Map'))();j.get=function(k,l){'use strict';if(i.has(l))return i.get(l);var m=new j(k,l);i.set(l,m);return m;};function j(k,l){'use strict';this.$PushRegistration3=k;this.appID=l;if(!j.$PushRegistration1&&!j.$PushRegistration2){j.$PushRegistration1=false;j.$PushRegistration2=false;}}j.prototype.getPushSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){if(!h||h.permission==='denied')l(new Error('No permission or not supported'));c('ServiceWorkerRegistration').getWorkerRegistration(this.$PushRegistration3).then(function(m){if(!m){k(null);return;}m.pushManager.getSubscription().then(function(n){k(n);})['catch'](l);})['catch'](l);}.bind(this));};j.prototype.$PushRegistration4=function(k){'use strict';var l=k.endpoint;if('subscriptionId' in k&&!new RegExp('/'+k.subscriptionId+'$').test(l))l+='/'+k.subscriptionId;return l;};j.prototype.$PushRegistration5=function(k,l,m,n){'use strict';var o=this.$PushRegistration4(m),p=k.getURIBuilder().getURI(),q=new l(p);q.setData({app_id:this.appID,push_endpoint:o,subscription_keys:JSON.stringify(m.toJSON().keys)});q.setMethod('post');if(q.setHandler)q.setHandler(function(r){if(r.payload&&r.payload.session_change)n();});q.send();};j.prototype.getSubscription=function(){'use strict';return new (c('Promise'))(function(k,l){this.getPushSubscription().then(function(m){if(m){k(this.$PushRegistration4(m));}else k(null);}.bind(this))['catch'](l);}.bind(this));};j.prototype.maybeRegisterPushAgain=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){this.getPushSubscription().then(function(p){if(p){this.$PushRegistration5(k,l,p,m);n(this.$PushRegistration4(p));}else n(null);}.bind(this))['catch'](function(){n(null);});}.bind(this));};j.prototype.$PushRegistration6=function(k,l,m){'use strict';return new (c('Promise'))(function(n,o){if(j.$PushRegistration2&&!m){o(new Error('sending disable info already'));return;}j.$PushRegistration2=true;var p=k.getURIBuilder().getURI(),q=new l(p.toString());q.setData({appid:this.appID,from_browser_settings:m});q.setMethod('post');if(q.listen){q.listen('finally',n);q.listen('fail',function(){j.$PushRegistration2=false;o();});}else if(q.setErrorHandler&&q.setHandler){q.setErrorHandler(function(){j.$PushRegistration2=false;o();});q.setHandler(n);}else n();q.send();}.bind(this));};j.prototype.isPushRegistered=function(k,l,m,n,o,p,q){'use strict';c('BrowserPushMessageHandler').registerRedirectHandler();return new (c('Promise'))(function(r,s){this.getPushSubscription().then(function(t){r(!!t||k&&!j.pushPermissionIsPending());if(t){if(o){self.$PushRegistration5(l,n,p,q);}else c('BrowserPushVisibilityChanger').listenForVisibility();}else if(!t&&k)if(j.pushPermissionIsOn()){this.registerPush(l,n,p,q)['catch'](function(){});}else this.$PushRegistration6(m,n,false);}.bind(this))['catch'](function(){if(k){this.$PushRegistration6(m,n,false);s();}}.bind(this));}.bind(this));};j.prototype.$PushRegistration7=function(){'use strict';return new (c('Promise'))(function(k,l){h.requestPermission(k);});};j.prototype.registerPushAndWaitForEndpoint=function(k,l,m,n){'use strict';return new (c('Promise'))(function(o,p){this.$PushRegistration8(k,l,m,true,null,n).then(function(q){if(typeof q!=='string'){p(new Error('registerPushImpl did not return an endpoint'));return;}o(q);})['catch'](p);}.bind(this));};j.prototype.registerPush=function(k,l,m,n){'use strict';return this.registerPushWithFinishedCallBack(k,l,m,null,n);};j.prototype.registerPushWithFinishedCallBack=function(k,l,m,n,o){'use strict';return new (c('Promise'))(function(p,q){this.$PushRegistration8(k,l,m,false,n,o).then(function(r){if(typeof r!=='boolean'){q(new Error('registerPushImpl did not return a boolean'));return;}p(r);})['catch'](q);}.bind(this));};j.prototype.$PushRegistration8=function(k,l,m,n,o,p){'use strict';if(j.$PushRegistration1)return new (c('Promise'))(function(q,r){r(new Error('registering already'));});j.$PushRegistration1=true;return new (c('Promise'))(function(q,r){var s=c('ServiceWorkerRegistration').registerWorkerIfUnregistered(this.$PushRegistration3),t=this.$PushRegistration7();c('Promise').all([s,t]).then(function(u){var v=u[0];if(!j.pushPermissionIsOn()){if(p)v.unregister();throw new Error('Push permission was denied');}if(!n)q(true);v.pushManager.subscribe({userVisibleOnly:true}).then(function(w){if(n)q(this.$PushRegistration4(w));this.$PushRegistration5(k,l,w,m);if(o)o();c('BrowserPushVisibilityChanger').listenForVisibility();}.bind(this))['catch'](function(w){j.$PushRegistration1=false;if(p)v.unregister();r(w);});}.bind(this))['catch'](function(u){j.$PushRegistration1=false;r(u);});}.bind(this));};j.prototype.unregisterPushAndSW=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.$PushRegistration6(k,l,true).then(function(){c('ServiceWorkerRegistration').unregisterControllingWorker().done(m);})['catch'](n);}.bind(this));};j.prototype.unregisterPushOnly=function(k,l){'use strict';return new (c('Promise'))(function(m,n){this.getPushSubscription().then(function(o){if(o){o.unsubscribe().then(this.$PushRegistration6(k,l,true)).then(function(){m(true);})['catch'](n);}else n();}.bind(this))['catch'](n);}.bind(this));};j.pushPermissionIsPending=function(){'use strict';return h&&h.permission==='default';};j.pushPermissionIsOn=function(){'use strict';return h&&h.permission==='granted';};f.exports=j;}),null);
__d("XBrowserPushMuteController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/notifications\/client\/push\/mute\/",{push_endpoint:{type:"String",required:true},appid:{type:"Int",required:true},is_settings_page:{type:"Bool",defaultValue:false},__asyncDialog:{type:"Int"}});}),null);
__d('BrowserPushMuteOptions',['fbt','AsyncRequest','PushRegistration','React','ReactDOM','XBrowserPushMuteController'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k,l,m){var n=c('PushRegistration').get(l,m);n.getPushSubscription().done(function(o){if(o){var p=c('XBrowserPushMuteController').getURIBuilder().setString('push_endpoint',o.endpoint).setInt('appid',m).getURI();new (c('AsyncRequest'))().setURI(p).setRelativeTo(k).send();}});}var j={showMuteOptions:function k(l,m,n){if(!c('PushRegistration').pushPermissionIsOn())return;c('ReactDOM').render(c('React').createElement('a',{href:'#',onClick:function o(){i(l,m,n);}},h._("\u975c\u97f3")),l);}};f.exports=j;}),null);
__d("XServiceWorkerController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/sw\/",{s:{type:"String",required:true}});}),null);
__d('ReactBlueBarBrowserPushMuteLink.react',['fbt','BrowserPushMuteOptions','React','XServiceWorkerController','nullthrows'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();function k(){var m=c('XServiceWorkerController').getURIBuilder().setString('s','push').getURI();m.setPath(m.getPath().replace(/\/$/,''));return m.toString();}i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(){'use strict';return false;};l.prototype.render=function(){'use strict';return (c('React').createElement('span',{ref:function(m){return this.$ReactBlueBarBrowserPushMuteLink1=m;}.bind(this)},h._("\u975c\u97f3")));};l.prototype.componentDidMount=function(){'use strict';c('BrowserPushMuteOptions').showMuteOptions(c('nullthrows')(this.$ReactBlueBarBrowserPushMuteLink1),k(),this.props.appID);};function l(){'use strict';i.apply(this,arguments);}f.exports=l;}),null);
__d('everyObject',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=Object.prototype.hasOwnProperty;function i(j,k,l){for(var m in j)if(h.call(j,m))if(!k.call(l,j[m],m,j))return false;return true;}f.exports=i;}),null);
__d('createChunkedResponseParser',['invariant'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i="\r\n",j=2;function k(l,m){var n=0,o=function p(q,r,s){if(m){q=m(q);!(q==null||typeof q==='string')?h(0):void 0;}if(q){var t=q.length;while(n<t){var u=q.indexOf(i,n);if(u<0)if(s){u=t;}else break;var v=q.slice(n,u);n+=v.length+j;l(v,r,s&&n>=t);}}else if(s)l('',r,true);};o.parseStreaming=true;return o;}f.exports=k;}),null);