if (self.CavalryLogger) { CavalryLogger.start_js(["vQbQO"]); }

__d('MessagingBugReportStateUtils',['ifRequired'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='N/A',i=function k(){return h;},j={getStateSnapshot:function k(){var l=false,m=false;c('ifRequired')('ChatSidebarVisibility',function(n){l=n.isSidebarVisible();m=n.isBuddyListVisible();});return {channel_connection:c('ifRequired')('ChannelConnection',function(n){return !n.disconnected();},i),buddylist_visible:m,sidebar_visible:l,tab_id:c('ifRequired')('ChannelClientID',function(n){return n.getID();},i),channel_host:c('ifRequired')('ChannelManager',function(n){return (n.getConfig('fullHost')+'.'+n.getConfig('domain'));},i)};}};f.exports=j;}),null);
__d('Droppable',['Collection','Drag','Draggable','Vector','emptyFunction'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';if(!i)throw new Error('Element should be a DOM node');if(!(this instanceof h)){if(i instanceof Array){var j=[];i.forEach(function(k){j.push(new h(k));});return new (c('Collection'))(h,j);}else return new h(i);}else{this.data={};this.dom=i;this.namespace=null;}}h.prototype.destroy=function(){'use strict';if(this.namespace)c('Drag').removeDroppable(this.namespace,this);this.data=this.dom=null;};h.prototype.setNamespace=function(i){'use strict';if(this.namespace)c('Drag').removeDroppable(this.namespace,this);this.namespace=i;c('Drag').addDroppable(i,this);return this;};h.prototype.setZIndex=function(i){'use strict';this.zIndex=i;return this;};h.prototype.hasPointMovedHorizontally=function(i){'use strict';var j=c('Vector').getElementPosition(this.dom);return j.x<=i.x&&this.dom.offsetWidth+j.x>i.x;};h.prototype.hasPointMovedVertically=function(i){'use strict';var j=c('Vector').getElementPosition(this.dom);return j.y<=i.y&&this.dom.offsetHeight+j.y>i.y;};h.prototype.hasPointMovedInside=function(i){'use strict';return this.hasPointMovedHorizontally(i)&&this.hasPointMovedVertically(i);};h.prototype.setDragOverHandler=function(i){'use strict';this.ondragover=i;return this;};h.prototype.setDragOverVectically=function(){'use strict';this.isDraggedOver=h.prototype.hasPointMovedVertically;return this;};h.prototype.setDragOverHorizontally=function(){'use strict';this.isDraggedOver=h.prototype.hasPointMovedHorizontally;return this;};h.prototype.setDragMoveHandler=function(i){'use strict';this.ondragmove=i;return this;};h.prototype.setDropHandler=function(i){'use strict';this.ondrop=i;return this;};h.prototype.zIndex=0;h.prototype.isDraggedOver=h.prototype.hasPointMovedInside;h.prototype.ondragover=c('emptyFunction');h.prototype.ondragmove=c('emptyFunction');h.prototype.ondrop=c('emptyFunction');h.prototype.getDOM=c('Draggable').prototype.getDOM;h.prototype.setKey=c('Draggable').prototype.setKey;h.prototype.getKey=c('Draggable').prototype.getKey;f.exports=h;}),null);
__d('SortableGroup',['Arbiter','CSS','DOM','Draggable','Droppable','Style','Vector','emptyFunction','removeFromArray'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){'use strict';this.namespace='sortable'+ ++h.instanceCount;this.draggables={};this.droppables={};this.sortables={};this.linkedGroups=[];this.linkedGroups.onbeforelinkjump=c('emptyFunction');this.linkedGroups.onlinkjump=c('emptyFunction');this.rootNode=null;this.boundingBox=null;this.neverEmpty=false;this.hasEmptyMessage=false;this.isDroppable=true;this.isDraggable=true;this.useScroller=true;this.dragOverCriteria='inside';this.requireSameParent=true;this.previousIndexList=[];this.anchor=null;this.disabled=false;this.autoWidth=false;this.placeholderWidth=false;this.placeholderHeight=false;}h.prototype.addEmptyMessage=function(i,j){'use strict';var k='placeholder';if(i.parentNode!=j)c('DOM').appendContent(j,i);this.emptyMessage=i;this._initializeAdded(k,i);this.hasEmptyMessage=true;this.sortables[k]=i;this.droppables[k]=new (c('Droppable'))(i).setNamespace(this.namespace).setDragOverHandler(this._dragOverHandlerShim.bind(this,k));return this;};h.prototype.setAutoWidth=function(i){'use strict';this.autoWidth=i;return this;};h.prototype.setPlaceholderWidth=function(i){'use strict';this.placeholderWidth=i;return this;};h.prototype.setPlaceholderHeight=function(i){'use strict';this.placeholderHeight=i;return this;};h.prototype.setUseScroller=function(i){'use strict';this.useScroller=i;return this;};h.prototype.setDragOverHorizontally=function(){'use strict';this.dragOverCriteria='horizontal';return this;};h.prototype.setDragOverVertically=function(){'use strict';this.dragOverCriteria='vertical';return this;};h.prototype.removeEmptyMessage=function(){'use strict';if(this.emptyMessage)c('DOM').remove(this.emptyMessage);this.hasEmptyMessage=false;this.removeSortable('placeholder');return this;};h.prototype.addSortable=function(i,j,k,l){'use strict';this._initializeAdded(i,j);this.sortables[i]=j;this.draggables[i]=new (c('Draggable'))(j).setNamespace(this.namespace).setGutter(this.gutter).setUseAbsolute(true).setUseScroller(this.useScroller).setGrabHandler(this.grabHandler.bind(this,i)).setDropHandler(this.dropHandler.bind(this,i,l)).setKey('key',i).setBoundingBox(this.boundingBox);if(k)this.draggables[i].addHandle(k);this.droppables[i]=new (c('Droppable'))(j).setNamespace(this.namespace).setDragOverHandler(this._dragOverHandlerShim.bind(this,i));if(this.dragOverCriteria==='horizontal'){this.droppables[i].setDragOverHorizontally();}else if(this.dragOverCriteria==='vertical')this.droppables[i].setDragOverVectically();return this;};h.prototype.destroy=function(){'use strict';for(var i in this.droppables)this.droppables[i].destroy();for(var j in this.draggables)this.draggables[j].destroy();this.droppables=this.draggables=this.rootNode=null;c('removeFromArray')(this.linkedGroups,this);for(var k=0;k<this.linkedGroups.length;k++)this.linkedGroups[k].linkedGroups=this.linkedGroups;};h.prototype.dragOverHandler=function(i,j){'use strict';if(!this.isDroppable&&!this.anchor)return;var k=false;if(!(j in this.draggables)){this.linkedGroups.onbeforelinkjump.call(this,j);if(!this.migrateLinkedSortable(j))throw new Error('Draggable dropped onto a foreign droppable!');k=true;}var l=true,m=this.getSortables(),n=this.sortables[j],o=this.sortables[i];if(!this.anchor){var p=m.length;for(var q=0;q<p;q++)if(m[q]==o){break;}else if(m[q]==n){l=false;break;}}else o=this.anchor;this.onbeforedragover(n,o);var r=this.linkedGroups.placeholder;this.insertPlaceholder(r,o,l||this.anchor);r.parentNode.insertBefore(n,r);this.ondragover(n,o,j,i);if(k)this.linkedGroups.onlinkjump.call(this,j);};h.prototype.dropHandler=function(i,j){'use strict';if(this._checkLastRemaining()){this.draggables[i].resetPosition();return;}var k=this.linkedGroups.placeholder;c('CSS').removeClass(this.sortables[i],'drag');this.draggables[i].resetPosition();k.parentNode.insertBefore(this.sortables[i],k);k.parentNode.removeChild(k);for(var l=0;l<this.linkedGroups.length;l++)if(this.linkedGroups[l].anchor)delete this.linkedGroups[l].anchor;this.ondropcallback(i,this.sortables[i]);this.onorderchange();if(this.previousIndexList.length===0)this.previousIndexList=Object.keys(this.sortables);var m=this.previousIndexList.indexOf(i),n=this.getOrder().indexOf(i);c('Arbiter').inform('drag-and-drop/'+j,{previousIndex:m,currentIndex:n});this.previousIndexList=this.getOrder();};h.prototype.getOrder=function(){'use strict';var i=[],j=this.getSortables();for(var k=0;k<j.length;k++)for(var l in this.sortables)if(this.sortables[l]==j[k]){i.push(l);break;}return i;};h.prototype.getSortables=function(){'use strict';return this.rootNode?this.rootNode.childNodes:[];};h.prototype.grabHandler=function(i){'use strict';if(this.disabled||this._checkLastRemaining()||!this.isDraggable){this.draggables[i].killDrag();return;}this.onbeforegrabcallback(this.sortables[i],i);var j=this.linkedGroups.placeholder,k=this.sortables[i];c('CSS').setClass(j,k.className);c('CSS').addClass(j,'droppable_placeholder');c('CSS').addClass(k,'drag');c('Vector').getElementDimensions(k).setElementDimensions(j);if(this.autoWidth){c('Style').set(j,'width','auto');}else if(this.placeholderWidth)c('Style').set(j,'width',this.placeholderWidth+'px');if(this.placeholderHeight)c('Style').set(j,'height',this.placeholderHeight+'px');k.parentNode.insertBefore(j,k);this.ongrabcallback(this.sortables[i],i);if(!this.isDroppable){this.anchor=k.nextSibling;if(!this.anchor){this.anchor=c('DOM').create('div');k.parentNode.appendChild(this.anchor);}}};h.prototype.insertPlaceholder=function(i,j,k){'use strict';if(k){c('DOM').insertBefore(j,i);}else c('DOM').insertAfter(j,i);};h.prototype.keyExists=function(i){'use strict';return this.sortables[i];};h.prototype.link=function(i){'use strict';i.linkedGroups=this.linkedGroups;if(!this.linkedGroups.length)this.linkedGroups.push(this);this.linkedGroups.push(i);for(var j=0;j<this.linkedGroups.length;j++)if(this.linkedGroups[j].namespace!=this.namespace){this.linkedGroups[j].namespace=this.namespace;for(var k in this.linkedGroups[j].droppables){this.linkedGroups[j].droppables[k].setNamespace(this.namespace);var l=this.linkedGroups[j].draggables[k];l&&l.setNamespace(this.namespace);}}return this;};h.prototype.migrateLinkedSortable=function(i){'use strict';for(var j=0;j<this.linkedGroups.length;j++)if(i in this.linkedGroups[j].draggables){this.sortables[i]=this.linkedGroups[j].sortables[i];this.draggables[i]=this.linkedGroups[j].draggables[i];this.draggables[i].setGrabHandler(this.grabHandler.bind(this,i)).setDropHandler(this.dropHandler.bind(this,i));this.droppables[i]=this.linkedGroups[j].droppables[i];this.droppables[i].setDragOverHandler(this._dragOverHandlerShim.bind(this,i));delete this.linkedGroups[j].sortables[i];delete this.linkedGroups[j].draggables[i];delete this.linkedGroups[j].droppables[i];return true;}return false;};h.prototype.removeSortable=function(i){'use strict';if(i in this.sortables){if(i in this.draggables)this.draggables[i].destroy();if(i in this.droppables)this.droppables[i].destroy();delete this.draggables[i];delete this.droppables[i];delete this.sortables[i];}};h.prototype.removeAllSortables=function(){'use strict';for(var i in this.sortables)this.removeSortable(i);};h.prototype.setDisabled=function(i){'use strict';this.disabled=i;return this;};h.prototype.forceDrop=function(i){'use strict';if(i in this.sortables)this.draggables[i].forceDrop();};h.prototype.killDrag=function(i){'use strict';if(i in this.sortables)this.draggables[i].killDrag();};h.prototype.setBeforeGrabCallback=function(i){'use strict';this.onbeforegrabcallback=i;return this;};h.prototype.setBoundingBox=function(i){'use strict';this.boundingBox=i;for(var j in this.draggables)this.draggables[j].setBoundingBox(this.boundingBox);return this;};h.prototype.setBeforeDragOverCallback=function(i){'use strict';this.onbeforedragover=i;return this;};h.prototype.setDragOverCallback=function(i){'use strict';this.ondragover=i;return this;};h.prototype.setDropCallback=function(i){'use strict';this.ondropcallback=i;return this;};h.prototype.setDroppable=function(i){'use strict';this.isDroppable=i;return this;};h.prototype.setDraggable=function(i){'use strict';this.isDraggable=i;return this;};h.prototype.setGrabCallback=function(i){'use strict';this.ongrabcallback=i;return this;};h.prototype.setBeforeLinkJumpHandler=function(i){'use strict';this.linkedGroups.onbeforelinkjump=i;return this;};h.prototype.setInsertPlaceholderHandler=function(i){'use strict';this.insertPlaceholder=i;};h.prototype.setLinkJumpHandler=function(i){'use strict';this.linkedGroups.onlinkjump=i;return this;};h.prototype.setNeverEmpty=function(i){'use strict';this.neverEmpty=i;};h.prototype.setOrderChangeHandler=function(i){'use strict';this.onorderchange=i;return this;};h.prototype.setRequireSameParent=function(i,j){'use strict';this.requireSameParent=j;};h.prototype.setSortablesGetter=function(i){'use strict';this.getSortables=i;};h.prototype._checkLastRemaining=function(i){'use strict';var j=this.hasEmptyMessage?2:1;return this.neverEmpty&&this.getSortables().length==j;};h.prototype._dragOverHandlerShim=function(i,j){'use strict';this.dragOverHandler(i,j.getKey('key'));};h.prototype._initializeAdded=function(i,j){'use strict';if(this.rootNode===null){this.rootNode=j.parentNode;if(!this.linkedGroups.placeholder)this.linkedGroups.placeholder=c('DOM').create(j.tagName,{className:'dragPlaceholder',style:{padding:'0'}});}else if(this.requireSameParent&&this.rootNode!=j.parentNode)throw new Error('All sortables of a collection must share the same parentNode');if(i in this.draggables)throw new Error('All sortables must have a unique key');};h.instanceCount=0;Object.assign(h.prototype,{gutter:15,onbeforegrabcallback:c('emptyFunction'),onbeforedragover:c('emptyFunction'),ondragover:c('emptyFunction'),ondropcallback:c('emptyFunction'),ongrabcallback:c('emptyFunction'),onorderchange:c('emptyFunction')});f.exports=b.SortableGroup||h;}),null);
__d('WebMessengerNux',['Event','AsyncSignal','DOM','WebMessengerEvents'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l){function m(){c('DOM').remove(i);c('WebMessengerEvents').masterDOMChanged();c('WebMessengerEvents').detailDOMChanged();new (c('AsyncSignal'))('/ajax/web_messenger/dismiss_nux.php').send();}c('Event').listen(j,'click',m);c('Event').listen(k,'click',l.show.bind(l));l.subscribe('hide',m);}f.exports=h;}),null);
__d('MercuryRecipientsDataSource',['DataSource','MercuryTypeaheadConstants'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';k=k||{};k.kanaNormalization=true;i.constructor.call(this,k);}j.prototype.buildData=function(k){'use strict';var l=[],m=[];k.forEach(function(n){var o=i.getEntry.call(this,n);if(o.render_type==c('MercuryTypeaheadConstants').NON_FRIEND_TYPE){var p=c('MercuryTypeaheadConstants').COMPOSER_NON_FRIENDS_MAX;if(m.length<p)m.push(n);}else if(l.length<c('MercuryTypeaheadConstants').COMPOSER_FRIENDS_MAX){o.render_type=c('MercuryTypeaheadConstants').FRIEND_TYPE;l.push(n);}}.bind(this));return i.buildData.call(this,l.concat(m));};f.exports=j;}),null);
__d('ServiceWorkerErrorUtils',['Promise','ClientServiceWorkerMessage','ServiceWorkerRegistration'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getHistory:function i(){if(!c('ServiceWorkerRegistration').isSupported())return c('Promise').reject('serviceWorker or messageChannel not supported');var j=false;return new (c('Promise'))(function(k){new (c('ClientServiceWorkerMessage'))('errordump',null,function(event){if(!j){j=true;k(event.data.data.history||[]);}}).sendViaController();});}};f.exports=h;}),null);
__d('MessagingDebug',['URI','BugBar','WebMessengerMessageIDFinder'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={showTrace:function i(j){var k=c('WebMessengerMessageIDFinder').find(j,j.getAttribute('data-selector')),l=new (c('URI'))(j.getAttribute('data-uri'));l.setQueryData({message_id:k,timestamp:j.getAttribute('data-timestamp')});window.open(l.toString(),'_blank');},reportBug:function i(j){var k=c('WebMessengerMessageIDFinder').find(j,j.getAttribute('data-selector')),l=j.getAttribute('data-timestamp');c('BugBar').addMetadata({'Message ID':k});c('BugBar').addMetadata({'Message Timestamp':l});}};f.exports=h;}),null);
__d('ComposerPhotoSorter',['Arbiter','CSS','DOM','Rect','SortableGroup','arrayContains'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function i(j,k){this._container=j;this._noDragDuringUploading=k;this._reset();this._update();var l=this._update.bind(this);c('Arbiter').subscribe('multi-upload/images-added/'+j.id,l);c('Arbiter').subscribe('multi-upload/image-removed/'+j.id,l);},_reset:function i(){this._ids=[];this._sortableGroup=new (c('SortableGroup'))();if(this._noDragDuringUploading){c('Arbiter').subscribe(['multi-upload/images-upload-start/'+this._container.id],this._sortableGroup.destroy.bind(this._sortableGroup));c('Arbiter').subscribe(['set-bounding-box/'+this._container.id],this._setBoundingBox.bind(this));}c('CSS').removeClass(this._container,'fbVaultPhotoSorter');},_update:function i(){var j=c('DOM').scry(this._container,'.fbVaultGridItem').filter(function(k){return !c('CSS').hasClass(k,'fbVaultEditableGridMoreLink');});if(j.length<2){if(this._ids.length>1){this._sortableGroup.destroy();this._reset();}return;}c('CSS').addClass(this._container,'fbVaultPhotoSorter');j.forEach(function(k){var l=c('DOM').scry(k,'input[type="hidden"]')[0];if(l&&!c('arrayContains')(this._ids,l.value)){this._ids.push(l.value);this._sortableGroup.addSortable(l.value,k,null,this._container.id);}}.bind(this));this._sortableGroup.setBoundingBox(new (c('Rect'))(this._container));},_setBoundingBox:function i(j,k){this._sortableGroup.setBoundingBox(k);}};f.exports=h;}),null);